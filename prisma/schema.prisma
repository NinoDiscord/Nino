datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum LogEvent {
  VOICE_MEMBER_DEAFENED
  VOICE_CHANNEL_LEAVE
  VOICE_CHANNEL_SWITCH
  VOICE_CHANNEL_JOIN
  VOICE_MEMBER_MUTED
  MESSAGE_UPDATED
  MESSAGE_DELETED
  MEMBER_BOOSTED
  THREAD_CREATED
  THREAD_DELETED
}

enum GlobalBanType {
  GUILD
  USER
}

enum PunishmentType {
  ALLOW_THREADS_AGAIN
  WARNING_REMOVED
  VOICE_UNDEAFEN
  WARNING_ADDED
  VOICE_UNMUTE
  VOICE_DEAFEN
  VOICE_MUTE
  NO_THREADS
  UNMUTE
  UNBAN
  KICK
  MUTE
  BAN
}

model Automod {
  blacklistedWords String[] @map("blacklisted_words")
  omitChannels     String[] @map("omit_channels")
  messageLinks     Boolean  @default(false)
  dehoisting       Boolean  @default(false)
  shortlinks       Boolean  @default(false)
  blacklist        Boolean  @default(false)
  omitUsers        String[] @map("omit_users")
  mentions         Boolean  @default(false)
  guildId          String   @map("guild_id")
  invites          Boolean  @default(false)
  spam             Boolean  @default(false)
  raid             Boolean  @default(false)

  @@unique([guildId])
  @@map("automod")
}

model GlobalBans {
  reason String?
  issuer String
  type   GlobalBanType
  id     String

  @@unique([id])
  @@map("global_bans")
}

model Cases {
  attachments String[]
  moderatorId String         @map("moderator_id")
  message_id  String?        @map("message_id")
  victimId    String         @map("victim_id")
  guildId     String
  reason      String?
  index       Int
  type        PunishmentType
  soft        Boolean
  time        Int?

  @@unique([guildId])
  @@map("cases")
}

model Guilds {
  modlogChannelId String?  @map("modlog_channel_id")
  mutedRoleId     String?  @map("muted_role_id")
  prefixes        String[]
  language        String
  guildId         String   @map("guild_id")

  @@unique([guildId])
  @@map("guilds")
}

model Logging {
  ignoreChannels String[]   @map("ignored_channels")
  ignoredUsers   String[]   @map("ignored_users")
  channelId      String?    @map("channel_id")
  enabled        Boolean
  events         LogEvent[]
  guildId        String     @map("guild_id")

  @@unique([guildId])
  @@map("logging")
}

model Punishments {
  warnings Int
  guildId  String         @map("guild_id")
  index    Int
  extra    Json?
  soft     Boolean
  time     String?
  type     PunishmentType

  @@unique([guildId, index])
  @@map("punishments")
}

model Users {
  prefixes String[]
  language String
  userId   String   @map("user_id")

  @@unique([userId])
  @@map("users")
}

model Warnings {
  guildId String  @map("guild_id")
  reason  String?
  amount  Int
  userId  String  @map("user_id")

  @@unique([guildId, userId])
  @@map("warnings")
}

model Customizibility {
  webhook String?
  logging Json
  modlog  Json
  guildId String  @map("guild_id")

  @@unique([guildId])
  @@map("guild_customizibility")
}

model Policies {
  do      Json
  events  String[]
  guildId String   @map("guild_id")

  @@unique([guildId])
  @@map("guild_policies")
}
